<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timer Quadricipite PWA</title>
<link rel="manifest" href="manifest.json">
<style>
  body, html {margin:0;padding:0;font-family:Arial,sans-serif;height:100%;background:#000;color:white;}
  #exercise-container {position:relative;width:100%;height:100vh;background-size:cover;background-position:center;display:flex;flex-direction:column;justify-content:center;align-items:center;text-shadow:2px2px4px#000;}
  #timer {font-size:5em;margin:0.2em 0;background-color:rgba(0,0,0,0.4);padding:10px 20px;border-radius:10px;}
  #exercise-name {font-size:2em;margin-bottom:0.2em;}
  #exercise-desc {font-size:1.2em;max-width:80%;text-align:center;background-color:rgba(0,0,0,0.5);padding:10px 15px;border-radius:10px;}
  #buttons {position:absolute;bottom:20px;display:flex;justify-content:center;gap:10px;}
  button {padding:12px 20px;font-size:1em;border-radius:10px;border:none;cursor:pointer;}
</style>
</head>
<body>
<div id="exercise-container">
  <div id="exercise-name">Pronto</div>
  <div id="timer">00:00</div>
  <div id="exercise-desc">Premi Start per iniziare</div>
  <div id="buttons">
    <button onclick="startTimer()" style="background-color:#4CAF50;color:white;">Start</button>
    <button onclick="pauseTimer()" style="background-color:#f44336;color:white;">Pause</button>
    <button onclick="resetTimer()" style="background-color:#2196F3;color:white;">Reset</button>
    <button onclick="skipExercise()" style="background-color:#FF9800;color:white;">Skip</button>
  </div>
</div>
<audio id="beep" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto" volume="1.0"></audio>
<script>
const workoutPlan=[
{name:"Step isometrico",duration:30,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Step-up.jpg/800px-Step-up.jpg",desc:"Salire e scendere lentamente sul gradino mantenendo contratti i quadricipiti."},
{name:"Recupero",duration:60,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Resting_person.jpg/800px-Resting_person.jpg",desc:"Respira profondamente e rilassa le gambe."},
{name:"Cyclette",duration:300,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Exercise_bike.jpg/800px-Exercise_bike.jpg",desc:"Pedala a ritmo moderato concentrandoti sulla spinta dei quadricipiti."},
{name:"Stacco punto critico",duration:45,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Deadlift_1.jpg/800px-Deadlift_1.jpg",desc:"Sollevamento pesi controllato, mantieni la schiena dritta e contrai quadricipiti."},
{name:"Recupero",duration:60,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Resting_person.jpg/800px-Resting_person.jpg",desc:"Respira profondamente e rilassa le gambe."},
{name:"Esercizio Alfabeto",duration:60,img:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/ABC_Alphabet.jpg/800px-ABC_Alphabet.jpg",desc:"Muovi la gamba come se scrivessi l'alfabeto, lentamente e controllato."}
];
const totalCycles=1;let currentIndex=0;let timeLeft=workoutPlan[0].duration;let timerInterval=null;let currentCycle=1;
const beep=document.getElementById("beep");const container=document.getElementById("exercise-container");const nameDiv=document.getElementById("exercise-name");const descDiv=document.getElementById("exercise-desc");const timerDiv=document.getElementById("timer");
function updateDisplay(){let minutes=Math.floor(timeLeft/60).toString().padStart(2,"0");let seconds=(timeLeft%60).toString().padStart(2,"0");timerDiv.textContent=`${minutes}:${seconds}`;nameDiv.textContent=workoutPlan[currentIndex].name;descDiv.textContent=workoutPlan[currentIndex].desc;container.style.backgroundImage=`url('${workoutPlan[currentIndex].img}')`}
function nextExercise(){beep.play().catch(e=>console.log("Audio bloccato, premi start"));currentIndex++;if(currentIndex>=workoutPlan.length){currentIndex=0;currentCycle++;if(currentCycle>totalCycles){clearInterval(timerInterval);timerInterval=null;timerDiv.textContent="00:00";nameDiv.textContent="Allenamento completato!";descDiv.textContent="";container.style.backgroundImage="none";return}}timeLeft=workoutPlan[currentIndex].duration;updateDisplay()}
function startTimer(){if(timerInterval)return;timerInterval=setInterval(()=>{timeLeft--;if(timeLeft<=0)nextExercise();updateDisplay()},1000)}
function pauseTimer(){clearInterval(timerInterval);timerInterval=null}
function resetTimer(){clearInterval(timerInterval);timerInterval=null;currentIndex=0;timeLeft=workoutPlan[0].duration;currentCycle=1;updateDisplay()}
function skipExercise(){nextExercise()}
updateDisplay();
if('serviceWorker' in navigator){navigator.serviceWorker.register('service-worker.js').then(()=>{console.log('Service Worker registrato');})}
</script>
</body>
</html>
